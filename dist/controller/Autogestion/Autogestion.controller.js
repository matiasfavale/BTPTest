sap.ui.define(["simplot/portalsprd/controller/BaseController","sap/ui/model/json/JSONModel","simplot/portalsprd/utils/models","simplot/portalsprd/utils/gateway","sap/ui/core/BusyIndicator","sap/viz/ui5/api/env/Format","sap/ui/core/Fragment","simplot/portalsprd/utils/DesktopMenu"],function(e,o,t,a,r,n,i,l){"use strict";return e.extend("simplot.portalsprd.controller.Autogestion",{onInit:function(){console.log("init")},i18nText:function(e){return t.get("i18n").getProperty(e)},onBeforeRendering:function(){console.log("onbefore")},onAfterRendering:function(){console.log("onafter");var e=this;t.load("Model_Main",{rowsTab:[{Materiales:"",Cantidad:""}],rowsCount:1,MaterialInp:"",MaestroProveedores:[{Titulo:"Empresa (3000)",Nombre1:"DEMO Proveedor",Nombre2:"Ltda.",PersJuridica:"SA (01)",Autor:"NSOUTO"}],DatosCli:{NombreEmpresa:{Name:"Simplot"}},CantidadInp:"",MaterialesCollection:[{Name:"Garrafa 45",Code:"1",Price:"500",Tax:"87"},{Name:"Garrafa 10",Code:"2",Price:"300",Tax:"50"},{Name:"Tanque",Code:"3",Price:"600",Tax:"90"}],rowsDevTab:[{Materiales:"",Cantidad:""}],rowsDevCount:1,MaterialDevInp:"",CantidadDevInp:"",Total:"0",rowsRecibo:[],rowsResumen:[{Id:"Recibo 1",Material:"Garrafa 45",Cantidad:"2",MontoBase:"500",Impuestos:"87",Total:"587",Metodo:"Tarjeta de Credito"}],rowsStock:[{Materiales:"Garrafa 10",StockIni:"15",Ventas:"-10",Ajuste:"-1",Devolucion:"",StockFin:"4"},{Materiales:"Garrafa 45",StockIni:"10",Ventas:"-5",Ajuste:"",Devolucion:"",StockFin:"6"},{Materiales:"Tanque",StockIni:"4",Ventas:"3",Ajuste:"",Devolucion:"",StockFin:"1"}],maxRowsStock:3,rowsValores:[{Ventas:"Cuenta Corriente",Ajuste:" $ 45.000,00 "},{Ventas:"Efectivo",Ajuste:" $ 30.000,00 "},{Ventas:"Transferencia",Ajuste:" $ 10.000,00 "},{Ventas:"Tarjeta de Credito",Ajuste:" $ 50.000,00 "},{Ventas:"Credito Cliente",Ajuste:" $ 15.000,00 "},{Ventas:"",Ajuste:""},{Ventas:"Saldo Financiero",Ajuste:" $"}],maxRowsValores:7,visibleStockFin:false,rowsStockFin:[{Ce:"4000",Alm:"4101",Denom:"Camion 1",Material:"300010",TextoBreve:"Garrafa 10kg",UMB:"c/u",Utilizacion:"4",Mon:"ARS",Valor:"3200"},{Ce:"4000",Alm:"4101",Denom:"Camion 1",Material:"300011",TextoBreve:"Garrafa 45kg",UMB:"c/u",Utilizacion:"6",Mon:"ARS",Valor:"6000"},{Ce:"4000",Alm:"4101",Denom:"Camion 1",Material:"300013",TextoBreve:"Tanque de 1/2 M3",UMB:"c/u",Utilizacion:"1",Mon:"ARS",Valor:"1500"}]});this.getView().setModel(t.get("Model_Main"))},onPressPDF:function(e){if(t.get(mockup).getProperty(e.getSource()._getBindingContext().sPath).File!==""){var o=t.get(mockup).getProperty(e.getSource()._getBindingContext().sPath).File;this.download(o,"","File.pdf")}},download:function(e,o,t){try{this.saveData(this.btoBlob(atob(e),o),t)}catch(e){console.log("Error al subir imagen")}},btoBlob:function(e,o,t){o=o||"";t=t||512;var a=e;var r=[];var n;for(var i=0;i<a.length;i+=t){var l=a.slice(i,i+t);var s=new Array(l.length);for(var d=0;d<l.length;d++){s[d]=l.charCodeAt(d)}var c=new Uint8Array(s);r.push(c)}try{n=new Blob(r,{type:o})}catch(e){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;n=new BlobBuilder;n.append(r);n=n.getBlob()}return n},saveData:function(e,o){if(navigator.msSaveBlob){return navigator.msSaveBlob(e,o)}else if(navigator.userAgent.indexOf("Chrome")!=-1){var t=document.createElement("a");document.body.appendChild(t);t.style="display: none";a=window.URL.createObjectURL(e);t.href=a;t.setAttribute("download",o);t.download=o;t.click();window.URL.revokeObjectURL(a)}else{var a=window.URL.createObjectURL(e);window.location.href=a}}})});