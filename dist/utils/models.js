sap.ui.define(["jquery.sap.global","sap/ui/model/xml/XMLModel","sap/ui/model/json/JSONModel","sap/ui/model/odata/ODataModel","sap/ui/model/odata/v2/ODataModel","sap/ui/Device"],function(e,t,n,r,o,i){"use strict";var s,a={},u={};u.models={};u.dependents=[null];a.extend=e.extend;a.addDependent=function(e){u.dependents.push(e)};a.setComponent=function(t){console.log("Model: set component - "+new Date);s=new e.Deferred;u.dependents[0]=t};a.resetAllHelpers=function(){e.each(a.helper,function(e,t){if(t.reset)t.reset()})};a.getPromise=function(){return new Promise(function(e){s.then(e)})};a.start=function(){console.log("Model: start - "+new Date);s.resolve();return a.getPromise()};a.extend({load:function(e,i,s,a){var d;s=s||"json";a=a||{};switch(s){case"xml":d=new t(i);break;case"json":d=new n(i);break;case"odata":d=new r(i,a);break;case"odatav2":d=new o(i,a);break;default:throw new Error("Tipo invalido");break}u.models[e]=d;return d},exists:function(t){var n;if(t in u.models){n=u.models[t]}else if(u.dependents.length){e.each(u.dependents,function(e){if(n=u.dependents[e].getModel(t)){return false}})}return typeof n!=="undefined"},get:function(t){var n;if(t in u.models){n=u.models[t]}else if(u.dependents.length){e.each(u.dependents,function(e){if(n=u.dependents[e].getModel(t)){return false}})}if(typeof n==="undefined"){throw new Error("El modelo '"+t+"' no existe.")}return n},setIn:function(e,t){e.setModel(a.get(t))},setListIn:function(e,t){t.map(function(t){e.setModel(a.get(t),t)})},setProperty:function(e,t,n){return a.get(e).setProperty(t,n)},getProperty:function(e,t){return a.get(e).getProperty(t)},denyProperty:function(e,t){var n=a.get(e).getProperty(t);a.get(e).setProperty(t,!n);return n},getVersion:function(e){switch(e.constructor){case r:return 1;break;case o:return 2;break}},createDeviceModel:function(){var e=new n(i);e.setDefaultBindingMode("OneWay");return e},createFLPModel:function(){var t=e.sap.getObject("sap.ushell.Container.getUser"),r=t?t().isJamActive():false,o=new n({isShareInJamActive:r});o.setDefaultBindingMode("OneWay");return o}});a.extend({helper:{},makeHelper:function(t,n,r,o){var i={};i.extend=e.extend;a.helper[t]=i;i.getModel=function(){if(typeof n==="string"){return a.get(n)}return n};if(typeof r!=="boolean"){o=r;r=false}if(typeof n!=="undefined"){var s=new Promise(function(e,t){var n=e.bind(null,i.getModel());if(r){n()}else{i.getModel().attachRequestCompleted(n)}});i.extend({getModelPromise:function(){return a.getPromise().then(function(){return s})},getProperty:function(e){return this.getModel().getProperty(e)},setProperty:function(e,t){return this.getModel().setProperty(e,t)},getData:function(e){return this.getModel().getData(e)},setData:function(e){return this.getModel().setData(e)}});i.reset=function(){if(typeof o==="function"){var e=i.getModelPromise().then(function(){return o(i)});i.getPromise=function(){return e}}};i.reset()}return i},getHelper:function(t){e.sap.require("Cluster.model.helper".concat(".",t));return a.helper[t]}});return a});